# Copyright (c) 2026 WabiSaby
# SPDX-License-Identifier: MIT
#
# Storage Node Configuration (node.yaml)
# Used by the community-deployable wabisaby-node binary.

auth:
  # Access token (JWT). Optional if refresh_token + keycloak_token_url are set (node will fetch/refresh automatically).
  # Env: WABISABY_NODE_AUTH_TOKEN or WABISABY_AUTH_TOKEN
  token: ""
  # Refresh token from Keycloak; with keycloak_token_url the node refreshes the access token before expiry.
  # Env: WABISABY_NODE_AUTH_REFRESH_TOKEN
  refresh_token: ""
  # Keycloak token endpoint for refresh, e.g. http://localhost:8180/realms/wabisaby/protocol/openid-connect/token
  # Env: WABISABY_NODE_KEYCLOAK_TOKEN_URL
  keycloak_token_url: ""
  # OIDC client id for refresh (default: wabisaby-api)
  keycloak_client_id: "wabisaby-api"

coordinator:
  # Required: gRPC address (host:port). Use 50052 for network-coordinator (NodeCoordinator); 50051 is capabilities-server.
  # Env: WABISABY_NODE_COORDINATOR_ADDRESS or WABISABY_COORDINATOR_ADDR
  address: "localhost:50052"

ipfs:
  api_url: "http://localhost:5001"
  # Data directory; default ~/.wabisaby/ipfs if empty
  data_dir: ""

node:
  # Auto-generated from hostname + username if empty
  name: ""
  # Auto-detected from TZ if empty (us, eu, asia, unknown)
  region: ""
  wallet_address: ""

storage:
  # GB; auto-detected (80% of available disk) if 0
  capacity_gb: 100

intervals:
  heartbeat: "1m"
  poll: "30s"

log:
  level: "info"
